<!DOCTYPE html><html lang="ko"><head>
  <script type="module" src="/@vite/client"></script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <title>유니폼 구성기</title>
    <link rel="stylesheet" href="styles-tokens.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="accessibility.css">
<style>
                .error-notifications-container {
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    z-index: 10000;
                    max-width: 400px;
                    pointer-events: none;
                }

                .error-notification {
                    background: var(--error-bg, #f56565);
                    color: var(--error-text, #fff);
                    padding: 16px;
                    border-radius: 8px;
                    margin-bottom: 12px;
                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
                    pointer-events: auto;
                    animation: slideIn 0.3s ease-out;
                    position: relative;
                    word-break: keep-all;
                    line-height: 1.5;
                }

                .error-notification.warning {
                    background: var(--warning-bg, #ed8936);
                }

                .error-notification.info {
                    background: var(--info-bg, #4299e1);
                }

                .error-notification.success {
                    background: var(--success-bg, #48bb78);
                }

                .error-notification-title {
                    font-weight: 600;
                    margin-bottom: 8px;
                    font-size: 14px;
                }

                .error-notification-message {
                    font-size: 13px;
                    line-height: 1.4;
                    white-space: pre-line;
                }

                .error-notification-actions {
                    margin-top: 12px;
                    display: flex;
                    gap: 8px;
                }

                .error-notification-action {
                    background: rgba(255, 255, 255, 0.2);
                    border: none;
                    color: inherit;
                    padding: 6px 12px;
                    border-radius: 4px;
                    cursor: pointer;
                    font-size: 12px;
                    transition: background-color 0.2s;
                }

                .error-notification-action:hover {
                    background: rgba(255, 255, 255, 0.3);
                }

                .error-notification-close {
                    position: absolute;
                    top: 8px;
                    right: 8px;
                    background: none;
                    border: none;
                    color: inherit;
                    cursor: pointer;
                    font-size: 16px;
                    line-height: 1;
                    opacity: 0.7;
                    padding: 4px;
                }

                .error-notification-close:hover {
                    opacity: 1;
                }

                @keyframes slideIn {
                    from {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }

                /* Korean typography support */
                body.lang-ko .error-notification {
                    font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
                    word-break: keep-all;
                    line-height: 1.6;
                }
            </style><style id="design-system-animations">
            @keyframes notification-in {
                from {
                    opacity: 0;
                    transform: translate(-50%, -50%) scale(0.8);
                }
                to {
                    opacity: 1;
                    transform: translate(-50%, -50%) scale(1);
                }
            }
            
            @keyframes notification-out {
                from {
                    opacity: 1;
                    transform: translate(-50%, -50%) scale(1);
                }
                to {
                    opacity: 0;
                    transform: translate(-50%, -50%) scale(0.8);
                }
            }
            
            @keyframes ripple {
                to {
                    transform: scale(2);
                    opacity: 0;
                }
            }
            
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            
            @keyframes slideIn {
                from {
                    transform: translateY(-50px);
                    opacity: 0;
                }
                to {
                    transform: translateY(0);
                    opacity: 1;
                }
            }
        </style><link id="korean-fonts" rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&amp;display=swap"><style id="korean-typography">
                .korean-text {
                    font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                    line-height: 1.6;
                    letter-spacing: -0.02em;
                }

                .korean-title {
                    font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                    font-weight: 500;
                    line-height: 1.4;
                    letter-spacing: -0.03em;
                }

                .korean-button {
                    font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                    font-weight: 500;
                    letter-spacing: -0.01em;
                }

                /* Korean input fields */
                .korean-input {
                    font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                    line-height: 1.5;
                }

                /* Body class for Korean layout */
                body.lang-ko {
                    font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                }

                body.lang-en {
                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                }

                /* Mobile-responsive Korean typography */
                @media screen and (max-width: 768px) {
                    .korean-text {
                        font-size: 14px;
                        line-height: 1.7;
                        word-break: keep-all;
                        overflow-wrap: break-word;
                    }

                    .korean-title {
                        font-size: 16px;
                        line-height: 1.5;
                        word-break: keep-all;
                    }

                    .korean-button {
                        font-size: 13px;
                        line-height: 1.4;
                        padding: 12px 16px;
                        word-break: keep-all;
                    }

                    .korean-input {
                        font-size: 16px; /* Prevents zoom on iOS */
                        line-height: 1.6;
                        padding: 12px;
                    }

                    /* Layer names and UI text in Korean */
                    body.lang-ko .layer-name,
                    body.lang-ko .form-label,
                    body.lang-ko .section-title,
                    body.lang-ko .panel-header h3,
                    body.lang-ko .panel-header h4 {
                        word-break: keep-all;
                        line-height: 1.5;
                        font-weight: 500;
                    }

                    /* Korean modal content */
                    body.lang-ko .modal-title,
                    body.lang-ko .modal-body {
                        word-break: keep-all;
                        line-height: 1.6;
                    }
                }

                /* Touch device optimizations for Korean text */
                @media (pointer: coarse) {
                    body.lang-ko .layer-item {
                        line-height: 1.6;
                        word-break: keep-all;
                    }

                    body.lang-ko .add-layer-btn,
                    body.lang-ko .layer-control-btn {
                        font-size: 12px;
                        line-height: 1.4;
                        word-break: keep-all;
                    }

                    /* Better touch targets for Korean buttons */
                    body.lang-ko button,
                    body.lang-ko .btn-primary,
                    body.lang-ko .btn-secondary {
                        min-height: 48px;
                        padding: 12px 20px;
                        line-height: 1.4;
                        word-break: keep-all;
                    }
                }
            </style></head>
<body class="lang-ko">
    <!-- Skip to main content link for screen readers -->
    <a href="#main-content" class="skip-link korean-text" data-i18n="accessibility.skipToMain">메인 콘텐츠로 건너뛰기</a>

    <!-- Live region for screen reader announcements -->
    <div id="screen-reader-announcements" class="sr-only" aria-live="polite" aria-atomic="true"></div>
    <div id="screen-reader-alerts" class="sr-only" aria-live="assertive" aria-atomic="true"></div>

    <div class="app-container" role="application" data-i18n-aria="accessibility.appContainer" aria-label="3D 유니폼 구성기 응용프로그램">
        <aside class="property-panel" role="complementary" aria-label="Texture Editor Controls">
            <div class="panel-header">
                <h1 data-i18n="nav.textureEditor" class="korean-text">텍스처 에디터</h1>
            </div>

            <section class="base-texture-section" aria-labelledby="base-texture-heading">
                <h2 id="base-texture-heading" data-i18n="baseTexture.title" class="korean-text">기본 텍스처</h2>
                <div class="color-controls">
                    <label for="primary-color" data-i18n="baseTexture.primaryColor" class="korean-text">기본 색상</label>
                    <input type="color" id="primary-color" value="#ffffff" aria-label="Select primary base color" aria-describedby="primary-color-error" style=""><div class="error-message sr-only" id="primary-color-error"></div>
                    <label for="secondary-color" data-i18n="baseTexture.secondaryColor" class="korean-text">보조 색상</label>
                    <input type="color" id="secondary-color" value="#000000" aria-label="Select secondary base color" aria-describedby="secondary-color-error" style=""><div class="error-message sr-only" id="secondary-color-error"></div>
                </div>
            </section>

            <section class="layers-section" aria-labelledby="layers-heading">
                <div class="layers-header">
                    <h2 id="layers-heading" data-i18n="layers.title" class="korean-text">레이어</h2>
                    <div class="layer-controls" role="group" data-i18n-aria="accessibility.addNewLayers" aria-label="새 레이어 추가">
                        <button id="add-text-btn" class="add-layer-btn korean-text" data-i18n-aria="accessibility.addNewTextLayer" aria-label="새 텍스트 레이어 추가" data-i18n="layers.addText" style="display: inline-flex; align-items: center; justify-content: center; border-radius: 10px; font-size: 12px; font-weight: 600; font-family: &quot;Segoe UI&quot;, Tahoma, Geneva, Verdana, sans-serif; text-transform: none; letter-spacing: 0.025em; cursor: pointer; border: none; transition: 0.2s; position: relative; overflow: hidden; user-select: none; outline: none; background: linear-gradient(135deg, rgb(74, 144, 226), rgb(53, 122, 189)); color: rgb(255, 255, 255); box-shadow: rgba(0, 0, 0, 0.15) 0px 4px 8px; padding: 8px 12px; min-height: 32px; width: 100%;">텍스트 추가</button>
                        <button id="add-logo-btn" class="add-layer-btn korean-text" data-i18n-aria="accessibility.addNewLogoLayer" aria-label="새 로고 레이어 추가" data-i18n="layers.addLogo" style="display: inline-flex; align-items: center; justify-content: center; border-radius: 10px; font-size: 12px; font-weight: 600; font-family: &quot;Segoe UI&quot;, Tahoma, Geneva, Verdana, sans-serif; text-transform: none; letter-spacing: 0.025em; cursor: pointer; border: none; transition: 0.2s; position: relative; overflow: hidden; user-select: none; outline: none; background: linear-gradient(135deg, rgb(74, 144, 226), rgb(53, 122, 189)); color: rgb(255, 255, 255); box-shadow: rgba(0, 0, 0, 0.15) 0px 4px 8px; padding: 8px 12px; min-height: 32px; width: 100%;">로고 추가</button>
                    </div>
                </div>
                <div id="layers-list" class="layers-list" role="list" data-i18n-aria="accessibility.textureLayersList" aria-label="텍스처 레이어 목록"></div>
            </section>

            <!-- Color picker dropdown for texture editor layers -->
            <div id="layer-color-picker-dropdown" class="color-picker-dropdown" role="dialog" aria-label="Layer Color Picker" aria-modal="true" tabindex="-1">
                <div class="color-picker-content">
                    <button class="color-picker-close-btn" id="layer-color-picker-close-btn" aria-label="Close layer color picker">Close</button>
                    <div class="color-picker-main">
                        <div class="color-wheel-section">
                            <label for="layer-color-wheel-canvas" class="sr-only">Layer color wheel - click or use arrow keys to select hue and saturation</label>
                            <canvas id="layer-color-wheel-canvas" width="200" height="200" role="slider" aria-label="Layer color wheel for hue and saturation selection" tabindex="0"></canvas>
                            <div class="color-wheel-handle" id="layer-color-wheel-handle" aria-hidden="true" style="left: 195px; top: 100px;"></div>
                        </div>
                        <div class="brightness-section">
                            <label for="layer-brightness-slider-track" class="sr-only">Layer brightness slider</label>
                            <div class="brightness-slider-container">
                                <div class="brightness-slider-track" id="layer-brightness-slider-track" role="slider" aria-label="Layer brightness level" aria-valuemin="0" aria-valuemax="100" aria-valuenow="50" tabindex="0">
                                    <div class="brightness-slider-handle" id="layer-brightness-slider-handle" aria-hidden="true" style="top: 0%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <section class="export-section" aria-labelledby="export-heading">
                <h2 id="export-heading" class="sr-only">Export and Order Actions</h2>
                <div class="action-controls" role="group" data-i18n-aria="accessibility.exportAndOrderActions" aria-label="내보내기 및 주문 작업">
                    <button id="order-btn" class="order-btn korean-text" data-i18n-aria="accessibility.createOrderForm" aria-label="현재 구성으로 주문서 작성" data-i18n="nav.createOrder" style="display: inline-flex; align-items: center; justify-content: center; border-radius: 10px; font-size: 14px; font-weight: 600; font-family: &quot;Segoe UI&quot;, Tahoma, Geneva, Verdana, sans-serif; text-transform: none; letter-spacing: 0.025em; cursor: pointer; border: none; transition: 0.2s; position: relative; overflow: hidden; user-select: none; outline: none; background: linear-gradient(135deg, rgb(39, 174, 96), rgb(33, 154, 82)); color: rgb(255, 255, 255); box-shadow: rgba(0, 0, 0, 0.15) 0px 4px 8px; width: 100%;">주문서 작성</button>
                    <button id="submit-btn" class="submit-btn korean-text" data-i18n-aria="accessibility.submitConfiguration" aria-label="현재 구성 제출" data-i18n="actions.submitOrder" style="display: inline-flex; align-items: center; justify-content: center; border-radius: 10px; font-size: 14px; font-weight: 600; font-family: &quot;Segoe UI&quot;, Tahoma, Geneva, Verdana, sans-serif; text-transform: none; letter-spacing: 0.025em; cursor: pointer; border: none; transition: 0.2s; position: relative; overflow: hidden; user-select: none; outline: none; background: linear-gradient(135deg, rgb(74, 144, 226), rgb(53, 122, 189)); color: rgb(255, 255, 255); box-shadow: rgba(0, 0, 0, 0.15) 0px 4px 8px; width: 100%;">주문 제출</button>
                </div>
            </section>
        </aside>

        <main id="main-content" role="main" data-i18n-aria="accessibility.mainContent" aria-label="3D 유니폼 미리보기 및 컨트롤">
        <section class="viewer-panel" data-i18n-aria="accessibility.previewViewport" aria-label="3D 미리보기 뷰포트">
            <div id="three-container" role="img" data-i18n-aria="accessibility.threeDPreview" aria-label="3D 유니폼 미리보기 - 화살표 키로 회전, +/- 키로 확대/축소" tabindex="0"><canvas data-engine="three.js r160" width="400" height="1080" style="display: block; width: 400px; height: 1080px; touch-action: none;"></canvas></div>
            
            <!-- Reset button (bottom left) -->
            <div class="reset-button-container">
                <button id="reset-view-btn" class="reset-view-btn" aria-label="Reset 3D view to default state" title="Reset view to default state">⟲</button>
            </div>
            
            <!-- FOV slider overlay -->
            <div id="fov-slider-overlay" class="fov-slider-overlay" style="display: none;" role="dialog" aria-label="Field of View Controls">
                <div class="fov-slider-container">
                    <label for="fov-slider">Field of View:</label>
                    <input type="range" id="fov-slider" min="10" max="50" step="1" value="35" aria-label="Field of view angle in degrees" aria-describedby="fov-slider-error" style=""><div class="error-message sr-only" id="fov-slider-error"></div>
                    <span id="fov-value" aria-live="polite">35°</span>
                </div>
            </div>
            
            <!-- Scale slider overlay -->
            <div id="scale-slider-overlay" class="scale-slider-overlay" style="display: none;" role="dialog" aria-label="Layer Property Controls">
                <div class="scale-slider-container">
                    <label for="scale-slider" data-i18n="controls.scale" class="korean-text">크기:</label>
                    <input type="range" id="scale-slider" min="0.1" max="3" step="0.1" value="1" aria-label="Layer scale from 0.1 to 3.0" aria-describedby="scale-slider-error" style=""><div class="error-message sr-only" id="scale-slider-error"></div>
                    <span id="scale-value" aria-live="polite">1.0</span>
                </div>

                <div class="section-separator"></div>

                <div class="rotate-flip-container">
                    <div class="rotate-slider-container">
                        <label for="rotate-slider" data-i18n="controls.rotation" class="korean-text">회전:</label>
                        <input type="range" id="rotate-slider" min="0" max="359" step="1" value="0" aria-label="Layer rotation angle in degrees" aria-describedby="rotate-slider-error" style=""><div class="error-message sr-only" id="rotate-slider-error"></div>
                        <span id="rotate-value" aria-live="polite">0°</span>
                    </div>
                    <div class="flip-controls-container">
                        <label class="flip-checkbox-label">
                            <input type="checkbox" id="flip-horizontal-checkbox" aria-label="Flip layer horizontally" aria-describedby="flip-horizontal-checkbox-error" style=""><div class="error-message sr-only" id="flip-horizontal-checkbox-error"></div>
                            <span class="checkbox-text korean-text" data-i18n="controls.flipHorizontal">좌우반전</span>
                        </label>
                    </div>
                </div>
                
                <!-- Color picker for layers with color property -->
                <div id="color-palette-container" class="color-display-container" style="display: none;">
                    <div class="color-display-wrapper">
                        <label class="color-display-label" for="current-color-display">Color:</label>
                        <button class="current-color-display" id="current-color-display" aria-label="Open color picker" aria-describedby="current-color-description">
                            <div class="current-color-swatch" id="current-color-swatch" aria-hidden="true"></div>
                            <span id="current-color-description" class="sr-only">Current color picker button</span>
                        </button>
                    </div>
                </div>
                
                <!-- Color picker dropdown -->
                <div id="color-picker-dropdown" class="color-picker-dropdown" role="dialog" aria-label="Color Picker" aria-modal="true" tabindex="-1">
                    <div class="color-picker-content">
                        <button class="color-picker-close-btn" id="color-picker-close-btn" aria-label="Close color picker">Close</button>
                        <div class="color-picker-main">
                            <div class="color-wheel-section">
                                <label for="color-wheel-canvas" class="sr-only">Color wheel - click or use arrow keys to select hue and saturation</label>
                                <canvas id="color-wheel-canvas" width="200" height="200" role="slider" aria-label="Color wheel for hue and saturation selection" tabindex="0"></canvas>
                                <div class="color-wheel-handle" id="color-wheel-handle" aria-hidden="true" style="left: 195px; top: 100px;"></div>
                            </div>
                            <div class="brightness-section">
                                <label for="brightness-slider-track" class="sr-only">Brightness slider</label>
                                <div class="brightness-slider-container">
                                    <div class="brightness-slider-track" id="brightness-slider-track" role="slider" aria-label="Brightness level" aria-valuemin="0" aria-valuemax="100" aria-valuenow="50" tabindex="0">
                                        <div class="brightness-slider-handle" id="brightness-slider-handle" aria-hidden="true" style="top: 0%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
        </section>
        </main>
    </div>
    
    <!-- Order Form Modal -->
    <div id="order-modal" class="modal-overlay" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="order-modal-title">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="order-modal-title" class="modal-title">주문서</h2>
                <button class="modal-close-btn" id="order-modal-close" aria-label="Close order form dialog">닫기</button>
            </div>
            <div class="modal-body" role="document">
                <!-- Form will be dynamically populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Keyboard navigation help -->
    <div id="keyboard-help" class="keyboard-help">
        <h4>키보드 단축키</h4>
        <ul>
            <li><kbd>Tab</kbd> Tab - 컨트롤 간 이동</li>
            <li><kbd>Arrow keys</kbd> 화살표 키 - 3D 뷰/메뉴 탐색</li>
            <li><kbd>Enter/Space</kbd> Enter/Space - 버튼 활성화</li>
            <li><kbd>Delete</kbd> Delete - 선택된 레이어 제거</li>
            <li><kbd>Ctrl+↑/↓</kbd> Ctrl+↑/↓ - 레이어 순서 변경</li>
            <li><kbd>Ctrl+1-9</kbd> Ctrl+1-9 - 번호로 레이어 선택</li>
            <li><kbd>+/-</kbd> +/- - 3D 뷰 확대/축소</li>
            <li><kbd>Esc</kbd> Esc - 대화상자 닫기/선택 해제</li>
        </ul>
    </div>

    <script type="module" src="main.js"></script>
    <!-- Accessibility validation in development -->
    <script type="module" src="accessibility-validator.js"></script>

<div id="error-notifications" class="error-notifications-container" aria-live="polite" aria-atomic="true"></div></body></html>